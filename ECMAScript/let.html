<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>let</title>
  <style>
    li {
      width: 300px;
      height: 20px;
      background-color: pink;
      margin-top: 10px;
    }

    ol {
      list-style: none;
    }
  </style>
</head>

<body>
  <h1>const</h1>
  <ol>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
  </ol>
</body>
<script>
  /*
  let:
    a. 不存在变量提升：先声明，后使用，否则报错

    b. 块级作用域内let声明的变量不受外部的影响,可以定义外层作用域的同名变量

    c. 不允许在相同作用域内重复声明一个变量
   */

  'use strict';
  let olLis = document.querySelectorAll('li');
  for (let i = 0; i < olLis.length; i++) {
    olLis[i].onclick = function () {
      alert(i);
    }
  }
  console.log('--------let 块级作用域----------');

  let foo = 'foo';

  if (true) {
    let foo = 'foo2';
    console.log(foo); //foo2
    if (true) {
      let foo = 'foo3';
      console.log(foo); //foo3
    }
    if (true) {
      console.log(foo); //foo2
    }
  }

  console.log(foo); // foo


  console.log('------let没有变量声明提升------');

  try {
    console.log(a);
    let a = 2;
  } catch (e) {

    console.log(e); //  a is not defined
  }

  try {
    let a;
    console.log(a);
  } catch (e) {
    // statements
    console.log(e); // undefined
  }


  console.log('------let 重复声明报错------');
  try {
    var a = 3;
    var a = 4;
    console.log(a);
  } catch (e) {
    console.log(e);
  }

  // try {
  // 	var  a = 3;
  // 	let  a = 4;
  // 	console.log(a);
  // } catch(e) {
  // 	console.log(e);
  // }


  function a() {
    {
      var a = 10;
      //所在的代码块内有效
      let b = 11;
    }
    console.log('var: ' + a); // 10
    // console.log('let : '+b); // b is not defined
  }

  function b() {
    // 计数器i只在for循环体内有效，在循环体外引用就会报错
    for (let i = 0; i < 3; i++) {
      console.log('循环内: ' + i);
    }
    console.log('循环外: ' + i); // i is not defined
  }

  function b1() {
    var a = [];
    for (let i = 0; i < 10; i++) {
      a[i] = function () {
        console.log(i);
      };
    }
    a[6](); // 6
  }

  function b2() {
    //for设置循环变量的那部分是一个父作用域， 而循环体内部是一个单独的子作用域
    for (let i = 0; i < 3; i++) { // 父作用域
      let i = 'abc'; // 子作用域
      console.log(i); // 'abc'
    }
  }

  function c() {
    console.log(foo); // 输出undefined
    var foo = 2;
    //不存在变量提升
    console.log(bar); // not defined
    let bar = 3;
  }

  function c1() {
    // var声明全局变量tmp
    var tmp = 123;
    if (true) {
      //在代码块内，使用let命令声明变量之前，该变量都是不可用的
      tmp = 'abc'; // tmp is not defined
      let tmp;
    }
  }
  // c()

  // for (let i = 0; i < 3; i++) {
  //   console.log(i);
  // }
  // console.log(i);


  {
    let a = 1;
    let ddd = 3; {
      let a = 2;
      console.log(a);
    }
    console.log(a);
  }
  try {
    console.log(ddd);
  } catch (e) {
    console.log(e);
  } finally {
    console.log('this is over');
  }
</script>

</html>