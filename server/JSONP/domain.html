<html>
<head>
  <title>chenio.com</title>
  <h1 id="show"></h1>
</head>
<body>
  <h3>同主域名下iframe控制document.domain进行跨域</h3>
  <script>
    document.domain = 'chenio.com';
    var iframe = document.createElement('iframe');
    iframe.src = 'http://api.chenio.com/domain.html';
    iframe.style.display = 'none';
    iframe.onload = function () {
      var doc = iframe.contentDocument || iframe.contentWindow.document;
      var txt = doc.getElementById('data').textContent;

      document.getElementById('show').innerHTML = txt;
      document.getElementById('show').style.color = 'red';
    }
    document.body.appendChild(iframe);
  </script>
</body>
</html>