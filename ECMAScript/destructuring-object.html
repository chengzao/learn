<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>解构 - 对象</title>
</head>
<body>
	<h1>解构 Destructuring - object</h1>
</body>
<script>
	'use strict';
		console.log('-----------变量名与属性名一致------------');
		{
			let { foo, bar } = { foo: "lorem", bar: "ipsum" };
			console.log(foo); // "lorem"
			console.log(bar); // "ipsum"
		}

		console.log('----------变量名与属性名不一致------------');
		{
			let robotA = { name: "Bender" };
	    let robotB = { name: "Flexo" };
	    let { name: a } = robotA;
	    let { name: b } = robotB;
	    console.log(a);// "Bender"
	    console.log(b);// "Flexo"
		}
		{
			let { baz } = { foo: "aaa", bar: "bbb" };
			console.log(baz); // undefined
		}

    console.log('-------解构也可以用于嵌套结构的对象-------');
    {
			let complicatedObj = {
	      arrayProp: [
	        "Zapp",
	        { second: "Brannigan" }
	      ]
	    };
	    let { arrayProp,arrayProp: [first, { second }] } = complicatedObj;
			console.log(arrayProp); // ['Zapp',{second: "Brannigan"}]
	    console.log(first); // "Zapp"
	    console.log(second); // "Brannigan"
		}
		{
			var node = {
			  loc: {
			    start: {
			      line: 1,
			      column: 5
			    }
			  }
			};
			var { loc, loc: { start }, loc: { start: { line }} } = node;
			console.log(line); // 1
			console.log(loc);  //  {start: Object}
			console.log(start); // {line: 1, column: 5}
		}

	console.log('------------嵌套赋值---------------');
	{
		let obj = {};
		let arr = [];
		({ foo: obj.prop, bar: arr[0] } = { foo: 123, bar: true });
		console.log(obj); // {prop:123}
		console.log(arr); // [true]
	}

	console.log('--------指定默认值--------------');
	{
		{
			var {x = 3} = {};
			console.log(x); // 3
		}
		{
			var {x, y = 5} = {x: 1};
			console.log(x); // 1
			console.log(y); // 5
		}
		{
			var {x: y = 3} = {};
			console.log(y); // 3
		}
		var {x: y = 3} = {x: 5};
		console.log(y); // 5

		var { message: msg = 'Something went wrong' } = {};
		console.log(msg); // "Something went wrong"
	}
	console.log('------------undefined && null ----------');
	{
		var {x = 3} = {x: undefined};
		console.log(x); // 3

		var {y = 3} = {y: null};
		console.log(y); // null
	}
	console.log('--------------解构失败------------');
	{
		//解构一个未定义的属性时，得到的值为undefined
    var { missing } = {};
    console.log(missing); //undefined
	}
	{
		let {foo} = {bar:'foo'}
		console.log(foo); //undefined
	}
	console.log('--------------报错------------');
	{
		try {
			//解构模式是嵌套的对象，而且子对象所在的父属性不存在，那么将会报错
		  let {foo: {bar}} = {baz: 'baz'};
		} catch (err) {
			console.log(err);
		}
	}
	console.log('--------已经声明的变量用于解构赋值-------');
	{
		// error
		// let x
		// {x} = {x: 1}
		// console.log(x);
	}
	{
		let x;
		({x} = {x: 1});
		console.log(x);
	}

	console.log('----------------array---------------');
	{
		let arr = [1, 2, 3];
		let {0 : first, [arr.length - 1] : last} = arr;
		console.log(first); // 1
		console.log(last); // 3
	}
</script>
</html>
