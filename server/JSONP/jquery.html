<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>jQuery JSONP</title>
</head>
<body>

  <script src="./js/jquery.min.js"></script>
  <script>
    // var srcipt = document.createElement('script');

    // script.src = 'http://api.study.com/jsonp.php?'

    // 事先定义好的一个函数
    // function test(data) {
    // 	console.log('1111', data);
    // }

    // jQuery中JSONP是通过$.ajax()，来实现的
    //
    var url = 'http://api.chenio.com/jsonp.php';
    $.ajax({
      url: url,
      type: 'get',
      // 这里需要将dataType 指定为jsonp
      dataType: 'jsonp',
      data: { name: 'xiaoming' },
      // 以字符串形式将事先定义好的函数名传递进来
      jsonpCallback: 'test',
      // jsonp: 'call',
      success: function (data) {
        //console.log(data);
      }
    });

    function test(data) {
      console.log('test function');
      console.log(data);
    }

    var url = 'http://api.chenio.com/weather.php';
    $.ajax({
      url: url,
      type: 'get',
      // 这里需要将dataType 指定为jsonp
      dataType: 'jsonp',
      data: { location: '北京' },
      // 以字符串形式将事先定义好的函数名传递进来
      jsonpCallback: 'weather',
      // jsonp: 'call',
      success: function (data) {
        //console.log(data);
      }
    });

    function weather(data) {
      console.log('weather function');
      console.log(data);
    }

  </script>
</body>
</html>